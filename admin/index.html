<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Silvera Admin - Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        silvera: {
                            50: '#faf5ff', 100: '#f3e8ff', 200: '#e9d5ff', 300: '#d8b4fe',
                            400: '#c084fc', 500: '#a855f7', 600: '#9333ea', 700: '#7c3aed',
                            800: '#6b21a8', 900: '#581c87',
                        }
                    }
                }
            }
        }
    </script>
    <style>
        .sidebar-item.active { background: rgba(124, 58, 237, 0.1); border-left-color: #7c3aed; color: #7c3aed; }
        .stat-card { transition: all 0.3s; }
        .stat-card:hover { transform: translateY(-4px); box-shadow: 0 10px 40px rgba(0,0,0,0.1); }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .animate-fade-in { animation: fadeIn 0.5s ease-out; }
    </style>
</head>
<body class="bg-gray-100 dark:bg-gray-900">
    <div class="flex min-h-screen">
        <!-- Sidebar -->
        <aside class="w-64 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 fixed h-full overflow-y-auto">
            <div class="p-6 border-b border-gray-200 dark:border-gray-700">
                <div class="flex items-center gap-3">
                    <img src="../public/assets/images/silvera_logo.PNG" alt="Silvera Logo" class="h-10 w-auto">
                    <div>
                        <h1 class="text-lg font-bold text-gray-900 dark:text-white">Silvera</h1>
                        <span class="text-xs text-gray-500">Admin Dashboard</span>
                    </div>
                </div>
            </div>
            <nav class="p-4 space-y-1">
                <a href="#" onclick="showTab('dashboard')" class="sidebar-item active flex items-center gap-3 px-4 py-3 rounded-lg border-l-4 border-transparent hover:bg-gray-50 dark:hover:bg-gray-700 transition">
                    <i data-feather="grid" class="w-5 h-5"></i><span>Dashboard</span>
                </a>
                <a href="#" onclick="showTab('analytics')" class="sidebar-item flex items-center gap-3 px-4 py-3 rounded-lg border-l-4 border-transparent hover:bg-gray-50 dark:hover:bg-gray-700 transition text-gray-600 dark:text-gray-300">
                    <i data-feather="bar-chart-2" class="w-5 h-5"></i><span>Analytics</span>
                </a>
                <a href="#" onclick="showTab('orders')" class="sidebar-item flex items-center gap-3 px-4 py-3 rounded-lg border-l-4 border-transparent hover:bg-gray-50 dark:hover:bg-gray-700 transition text-gray-600 dark:text-gray-300">
                    <i data-feather="shopping-bag" class="w-5 h-5"></i><span>Orders</span>
                </a>
                <a href="#" onclick="showTab('products')" class="sidebar-item flex items-center gap-3 px-4 py-3 rounded-lg border-l-4 border-transparent hover:bg-gray-50 dark:hover:bg-gray-700 transition text-gray-600 dark:text-gray-300">
                    <i data-feather="package" class="w-5 h-5"></i><span>Products</span>
                </a>
                <a href="#" onclick="showTab('inventory')" class="sidebar-item flex items-center gap-3 px-4 py-3 rounded-lg border-l-4 border-transparent hover:bg-gray-50 dark:hover:bg-gray-700 transition text-gray-600 dark:text-gray-300">
                    <i data-feather="layers" class="w-5 h-5"></i><span>Inventory</span>
                </a>
                <a href="#" onclick="showTab('customers')" class="sidebar-item flex items-center gap-3 px-4 py-3 rounded-lg border-l-4 border-transparent hover:bg-gray-50 dark:hover:bg-gray-700 transition text-gray-600 dark:text-gray-300">
                    <i data-feather="users" class="w-5 h-5"></i><span>Customers</span>
                </a>
                <a href="#" onclick="showTab('categories')" class="sidebar-item flex items-center gap-3 px-4 py-3 rounded-lg border-l-4 border-transparent hover:bg-gray-50 dark:hover:bg-gray-700 transition text-gray-600 dark:text-gray-300">
                    <i data-feather="folder" class="w-5 h-5"></i><span>Categories</span>
                </a>
                <a href="#" onclick="showTab('payments')" class="sidebar-item flex items-center gap-3 px-4 py-3 rounded-lg border-l-4 border-transparent hover:bg-gray-50 dark:hover:bg-gray-700 transition text-gray-600 dark:text-gray-300">
                    <i data-feather="credit-card" class="w-5 h-5"></i><span>Payments</span>
                </a>
                <a href="#" onclick="showTab('settings')" class="sidebar-item flex items-center gap-3 px-4 py-3 rounded-lg border-l-4 border-transparent hover:bg-gray-50 dark:hover:bg-gray-700 transition text-gray-600 dark:text-gray-300">
                    <i data-feather="settings" class="w-5 h-5"></i><span>Settings</span>
                </a>
                <hr class="my-4 border-gray-200 dark:border-gray-700">
                <a href="/" target="_blank" class="sidebar-item flex items-center gap-3 px-4 py-3 rounded-lg border-l-4 border-transparent hover:bg-gray-50 dark:hover:bg-gray-700 transition text-gray-600 dark:text-gray-300">
                    <i data-feather="external-link" class="w-5 h-5"></i><span>View Store</span>
                </a>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 ml-64">
            <!-- Login Screen -->
            <div id="loginScreen" class="min-h-screen flex items-center justify-center bg-gradient-to-br from-silvera-600 to-pink-600 p-4">
                <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-2xl p-8 w-full max-w-md animate-fade-in">
                    <div class="text-center mb-8">
                        <div class="mb-4 flex justify-center">
                            <img src="../public/assets/images/silvera_logo.PNG" alt="Silvera Logo" class="h-16 w-auto">
                        </div>
                        <h2 class="text-2xl font-bold text-gray-900 dark:text-white">Welcome Back</h2>
                        <p class="text-gray-500">Sign in to Silvera Admin</p>
                    </div>
                    <form onsubmit="login(event)" class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Email</label>
                            <input type="email" id="loginEmail" value="admin@silvera.shop" class="w-full px-4 py-3 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-silvera-500 focus:border-transparent transition" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Password</label>
                            <input type="password" id="loginPassword" value="admin123" class="w-full px-4 py-3 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-silvera-500 focus:border-transparent transition" required>
                        </div>
                        <button type="submit" class="w-full bg-silvera-600 hover:bg-silvera-700 text-white font-semibold py-3 rounded-xl transition transform hover:scale-[1.02]">
                            Sign In
                        </button>
                    </form>
                </div>
            </div>

            <!-- Dashboard Content (hidden until login) -->
            <div id="dashboardContent" class="hidden">
                <!-- Header -->
                <header class="bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-6 py-4 sticky top-0 z-40">
                    <div class="flex items-center justify-between">
                        <div>
                            <h2 class="text-xl font-bold text-gray-900 dark:text-white" id="pageTitle">Dashboard</h2>
                            <p class="text-sm text-gray-500" id="pageDate"></p>
                        </div>
                        <div class="flex items-center gap-4">
                            <button onclick="toggleDarkMode()" class="p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition">
                                <i data-feather="moon" class="w-5 h-5 text-gray-600 dark:text-gray-300"></i>
                            </button>
                            <button class="p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition relative">
                                <i data-feather="bell" class="w-5 h-5 text-gray-600 dark:text-gray-300"></i>
                                <span class="absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full"></span>
                            </button>
                            <div class="flex items-center gap-3 pl-4 border-l border-gray-200 dark:border-gray-700">
                                <div class="w-10 h-10 bg-silvera-100 rounded-full flex items-center justify-center text-silvera-600 font-semibold">A</div>
                                <div class="hidden sm:block">
                                    <p class="text-sm font-medium text-gray-900 dark:text-white">Admin</p>
                                    <p class="text-xs text-gray-500">Super Admin</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </header>

                <!-- Tab Content -->
                <div class="p-6">
                    <!-- Dashboard Tab -->
                    <div id="dashboardTab" class="tab-content">
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                            <div class="stat-card bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-sm">
                                <div class="flex items-center justify-between mb-4">
                                    <div class="w-12 h-12 bg-green-100 dark:bg-green-900/30 rounded-xl flex items-center justify-center">
                                        <i data-feather="dollar-sign" class="w-6 h-6 text-green-600"></i>
                                    </div>
                                    <span class="text-green-500 text-sm font-medium flex items-center gap-1">
                                        <i data-feather="trending-up" class="w-4 h-4"></i> +12.5%
                                    </span>
                                </div>
                                <p class="text-sm text-gray-500 dark:text-gray-400">Total Revenue</p>
                                <p class="text-2xl font-bold text-gray-900 dark:text-white">â‚±<span id="statRevenue">0</span></p>
                            </div>
                            <div class="stat-card bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-sm">
                                <div class="flex items-center justify-between mb-4">
                                    <div class="w-12 h-12 bg-blue-100 dark:bg-blue-900/30 rounded-xl flex items-center justify-center">
                                        <i data-feather="shopping-bag" class="w-6 h-6 text-blue-600"></i>
                                    </div>
                                    <span class="text-green-500 text-sm font-medium flex items-center gap-1">
                                        <i data-feather="trending-up" class="w-4 h-4"></i> +8.2%
                                    </span>
                                </div>
                                <p class="text-sm text-gray-500 dark:text-gray-400">Total Orders</p>
                                <p class="text-2xl font-bold text-gray-900 dark:text-white" id="statOrders">0</p>
                            </div>
                            <div class="stat-card bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-sm">
                                <div class="flex items-center justify-between mb-4">
                                    <div class="w-12 h-12 bg-amber-100 dark:bg-amber-900/30 rounded-xl flex items-center justify-center">
                                        <i data-feather="package" class="w-6 h-6 text-amber-600"></i>
                                    </div>
                                </div>
                                <p class="text-sm text-gray-500 dark:text-gray-400">Products</p>
                                <p class="text-2xl font-bold text-gray-900 dark:text-white" id="statProducts">0</p>
                            </div>
                            <div class="stat-card bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-sm">
                                <div class="flex items-center justify-between mb-4">
                                    <div class="w-12 h-12 bg-silvera-100 dark:bg-silvera-900/30 rounded-xl flex items-center justify-center">
                                        <i data-feather="users" class="w-6 h-6 text-silvera-600"></i>
                                    </div>
                                    <span class="text-green-500 text-sm font-medium flex items-center gap-1">
                                        <i data-feather="trending-up" class="w-4 h-4"></i> +5.1%
                                    </span>
                                </div>
                                <p class="text-sm text-gray-500 dark:text-gray-400">Customers</p>
                                <p class="text-2xl font-bold text-gray-900 dark:text-white" id="statUsers">0</p>
                            </div>
                        </div>

                        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                            <div class="lg:col-span-2 bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-sm">
                                <div class="flex items-center justify-between mb-6">
                                    <h3 class="font-semibold text-gray-900 dark:text-white">Sales Overview</h3>
                                    <select class="text-sm bg-gray-100 dark:bg-gray-700 rounded-lg px-3 py-1.5">
                                        <option>Last 7 days</option>
                                        <option>Last 30 days</option>
                                    </select>
                                </div>
                                <canvas id="salesChart" height="200"></canvas>
                            </div>
                            <div class="bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-sm">
                                <h3 class="font-semibold text-gray-900 dark:text-white mb-6">Top Products</h3>
                                <div class="space-y-4" id="topProductsList"></div>
                            </div>
                        </div>

                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mt-6">
                            <div class="bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-sm">
                                <h3 class="font-semibold text-gray-900 dark:text-white mb-4">Recent Orders</h3>
                                <div class="overflow-x-auto">
                                    <table class="w-full">
                                        <thead>
                                            <tr class="text-left text-xs text-gray-500 uppercase">
                                                <th class="pb-3">Order</th>
                                                <th class="pb-3">Customer</th>
                                                <th class="pb-3">Amount</th>
                                                <th class="pb-3">Status</th>
                                            </tr>
                                        </thead>
                                        <tbody id="recentOrdersList" class="text-sm"></tbody>
                                    </table>
                                </div>
                            </div>
                            <div class="bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-sm">
                                <h3 class="font-semibold text-gray-900 dark:text-white mb-4">Low Stock Alerts</h3>
                                <div class="space-y-3" id="lowStockList"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Products Tab -->
                    <div id="productsTab" class="tab-content hidden">
                        <div class="flex items-center justify-between mb-6">
                            <div class="flex items-center gap-4">
                                <div class="relative">
                                    <input type="search" placeholder="Search products..." class="pl-10 pr-4 py-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl w-64">
                                    <i data-feather="search" class="w-4 h-4 text-gray-400 absolute left-3 top-1/2 -translate-y-1/2"></i>
                                </div>
                            </div>
                            <button onclick="showAddProductModal()" class="flex items-center gap-2 bg-silvera-600 hover:bg-silvera-700 text-white px-4 py-2 rounded-xl transition">
                                <i data-feather="plus" class="w-4 h-4"></i> Add Product
                            </button>
                        </div>
                        <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-sm overflow-hidden">
                            <table class="w-full">
                                <thead class="bg-gray-50 dark:bg-gray-700">
                                    <tr class="text-left text-xs text-gray-500 uppercase">
                                        <th class="px-6 py-4">Product</th>
                                        <th class="px-6 py-4">Category</th>
                                        <th class="px-6 py-4">Price</th>
                                        <th class="px-6 py-4">Stock</th>
                                        <th class="px-6 py-4">Status</th>
                                        <th class="px-6 py-4">Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="productsTableBody" class="divide-y divide-gray-100 dark:divide-gray-700"></tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Orders Tab -->
                    <div id="ordersTab" class="tab-content hidden">
                        <div class="flex items-center justify-between mb-6">
                            <div class="flex items-center gap-4">
                                <select class="px-4 py-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl">
                                    <option>All Status</option>
                                    <option>Pending</option>
                                    <option>Processing</option>
                                    <option>Shipped</option>
                                    <option>Delivered</option>
                                </select>
                            </div>
                            <button class="flex items-center gap-2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 text-gray-700 dark:text-gray-300 px-4 py-2 rounded-xl transition">
                                <i data-feather="download" class="w-4 h-4"></i> Export
                            </button>
                        </div>
                        <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-sm overflow-hidden">
                            <table class="w-full">
                                <thead class="bg-gray-50 dark:bg-gray-700">
                                    <tr class="text-left text-xs text-gray-500 uppercase">
                                        <th class="px-6 py-4">Order ID</th>
                                        <th class="px-6 py-4">Customer</th>
                                        <th class="px-6 py-4">Items</th>
                                        <th class="px-6 py-4">Total</th>
                                        <th class="px-6 py-4">Status</th>
                                        <th class="px-6 py-4">Date</th>
                                        <th class="px-6 py-4">Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="ordersTableBody" class="divide-y divide-gray-100 dark:divide-gray-700"></tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Other tabs (simplified for brevity) -->
                    <div id="analyticsTab" class="tab-content hidden">
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            <div class="bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-sm">
                                <h3 class="font-semibold text-gray-900 dark:text-white mb-4">Revenue by Category</h3>
                                <canvas id="categoryChart" height="200"></canvas>
                            </div>
                            <div class="bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-sm">
                                <h3 class="font-semibold text-gray-900 dark:text-white mb-4">Order Status</h3>
                                <canvas id="orderStatusChart" height="200"></canvas>
                            </div>
                        </div>
                    </div>

                    <div id="inventoryTab" class="tab-content hidden">
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-6">
                            <div class="bg-white dark:bg-gray-800 rounded-xl p-4">
                                <p class="text-sm text-gray-500">Total Items</p>
                                <p class="text-2xl font-bold" id="invTotal">0</p>
                            </div>
                            <div class="bg-white dark:bg-gray-800 rounded-xl p-4">
                                <p class="text-sm text-gray-500">Low Stock</p>
                                <p class="text-2xl font-bold text-amber-500" id="invLow">0</p>
                            </div>
                            <div class="bg-white dark:bg-gray-800 rounded-xl p-4">
                                <p class="text-sm text-gray-500">Out of Stock</p>
                                <p class="text-2xl font-bold text-red-500" id="invOut">0</p>
                            </div>
                            <div class="bg-white dark:bg-gray-800 rounded-xl p-4">
                                <p class="text-sm text-gray-500">Inventory Value</p>
                                <p class="text-2xl font-bold">â‚±<span id="invValue">0</span></p>
                            </div>
                        </div>
                        <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-sm overflow-hidden">
                            <table class="w-full">
                                <thead class="bg-gray-50 dark:bg-gray-700">
                                    <tr class="text-left text-xs text-gray-500 uppercase">
                                        <th class="px-6 py-4">SKU</th>
                                        <th class="px-6 py-4">Product</th>
                                        <th class="px-6 py-4">Stock</th>
                                        <th class="px-6 py-4">Status</th>
                                        <th class="px-6 py-4">Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="inventoryTableBody" class="divide-y divide-gray-100 dark:divide-gray-700"></tbody>
                            </table>
                        </div>
                    </div>

                    <div id="customersTab" class="tab-content hidden">
                        <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-sm overflow-hidden">
                            <table class="w-full">
                                <thead class="bg-gray-50 dark:bg-gray-700">
                                    <tr class="text-left text-xs text-gray-500 uppercase">
                                        <th class="px-6 py-4">Customer</th>
                                        <th class="px-6 py-4">Email</th>
                                        <th class="px-6 py-4">Orders</th>
                                        <th class="px-6 py-4">Total Spent</th>
                                        <th class="px-6 py-4">Joined</th>
                                    </tr>
                                </thead>
                                <tbody id="customersTableBody" class="divide-y divide-gray-100 dark:divide-gray-700"></tbody>
                            </table>
                        </div>
                    </div>

                    <div id="categoriesTab" class="tab-content hidden">
                        <div class="flex justify-end mb-6">
                            <button onclick="addCategory()" class="flex items-center gap-2 bg-silvera-600 hover:bg-silvera-700 text-white px-4 py-2 rounded-xl transition">
                                <i data-feather="plus" class="w-4 h-4"></i> Add Category
                            </button>
                        </div>
                        <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-sm overflow-hidden">
                            <table class="w-full">
                                <thead class="bg-gray-50 dark:bg-gray-700">
                                    <tr class="text-left text-xs text-gray-500 uppercase">
                                        <th class="px-6 py-4">ID</th>
                                        <th class="px-6 py-4">Name</th>
                                        <th class="px-6 py-4">Slug</th>
                                        <th class="px-6 py-4">Products</th>
                                        <th class="px-6 py-4">Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="categoriesTableBody" class="divide-y divide-gray-100 dark:divide-gray-700"></tbody>
                            </table>
                        </div>
                    </div>

                    <div id="paymentsTab" class="tab-content hidden">
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            <div class="bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-sm">
                                <h3 class="font-semibold text-gray-900 dark:text-white mb-6">Payment Settings</h3>
                                <div class="space-y-4">
                                    <div class="flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-xl">
                                        <div class="flex items-center gap-3">
                                            <span class="text-2xl">ðŸ’³</span>
                                            <span class="font-medium">GCash</span>
                                        </div>
                                        <label class="relative inline-flex items-center cursor-pointer">
                                            <input type="checkbox" checked class="sr-only peer">
                                            <div class="w-11 h-6 bg-gray-200 peer-checked:bg-silvera-600 rounded-full peer peer-checked:after:translate-x-full after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all"></div>
                                        </label>
                                    </div>
                                    <div class="flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-xl">
                                        <div class="flex items-center gap-3">
                                            <span class="text-2xl">ðŸ’³</span>
                                            <span class="font-medium">Maya</span>
                                        </div>
                                        <label class="relative inline-flex items-center cursor-pointer">
                                            <input type="checkbox" checked class="sr-only peer">
                                            <div class="w-11 h-6 bg-gray-200 peer-checked:bg-silvera-600 rounded-full peer peer-checked:after:translate-x-full after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all"></div>
                                        </label>
                                    </div>
                                    <div class="flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-xl">
                                        <div class="flex items-center gap-3">
                                            <span class="text-2xl">ðŸšš</span>
                                            <span class="font-medium">COD</span>
                                        </div>
                                        <label class="relative inline-flex items-center cursor-pointer">
                                            <input type="checkbox" checked class="sr-only peer">
                                            <div class="w-11 h-6 bg-gray-200 peer-checked:bg-silvera-600 rounded-full peer peer-checked:after:translate-x-full after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all"></div>
                                        </label>
                                    </div>
                                </div>
                            </div>
                            <div class="bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-sm">
                                <h3 class="font-semibold text-gray-900 dark:text-white mb-6">Payment Distribution</h3>
                                <div class="space-y-4">
                                    <div>
                                        <div class="flex justify-between text-sm mb-1"><span>GCash</span><span>45%</span></div>
                                        <div class="h-2 bg-gray-100 rounded-full"><div class="h-2 bg-silvera-500 rounded-full" style="width:45%"></div></div>
                                    </div>
                                    <div>
                                        <div class="flex justify-between text-sm mb-1"><span>Maya</span><span>25%</span></div>
                                        <div class="h-2 bg-gray-100 rounded-full"><div class="h-2 bg-blue-500 rounded-full" style="width:25%"></div></div>
                                    </div>
                                    <div>
                                        <div class="flex justify-between text-sm mb-1"><span>COD</span><span>30%</span></div>
                                        <div class="h-2 bg-gray-100 rounded-full"><div class="h-2 bg-green-500 rounded-full" style="width:30%"></div></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="settingsTab" class="tab-content hidden">
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            <div class="bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-sm">
                                <h3 class="font-semibold text-gray-900 dark:text-white mb-6">Store Settings</h3>
                                <div class="space-y-4">
                                    <div>
                                        <label class="block text-sm font-medium mb-1">Store Name</label>
                                        <input type="text" value="Silvera Philippines" class="w-full px-4 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium mb-1">Store Email</label>
                                        <input type="email" value="support@silvera.shop" class="w-full px-4 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium mb-1">Currency</label>
                                        <select class="w-full px-4 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl">
                                            <option>PHP (â‚±) - Philippine Peso</option>
                                        </select>
                                    </div>
                                    <button class="bg-silvera-600 hover:bg-silvera-700 text-white px-6 py-2 rounded-xl transition">Save Settings</button>
                                </div>
                            </div>
                            <div class="bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-sm">
                                <h3 class="font-semibold text-gray-900 dark:text-white mb-6">Shipping Settings</h3>
                                <div class="space-y-4">
                                    <div>
                                        <label class="block text-sm font-medium mb-1">Free Shipping Threshold</label>
                                        <div class="flex"><span class="px-4 py-2 bg-gray-100 border border-r-0 rounded-l-xl">â‚±</span><input type="number" value="999" class="flex-1 px-4 py-2 bg-gray-50 dark:bg-gray-700 border rounded-r-xl"></div>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium mb-1">Metro Manila Fee</label>
                                        <div class="flex"><span class="px-4 py-2 bg-gray-100 border border-r-0 rounded-l-xl">â‚±</span><input type="number" value="99" class="flex-1 px-4 py-2 bg-gray-50 dark:bg-gray-700 border rounded-r-xl"></div>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium mb-1">Provincial Fee</label>
                                        <div class="flex"><span class="px-4 py-2 bg-gray-100 border border-r-0 rounded-l-xl">â‚±</span><input type="number" value="150" class="flex-1 px-4 py-2 bg-gray-50 dark:bg-gray-700 border rounded-r-xl"></div>
                                    </div>
                                    <button class="bg-silvera-600 hover:bg-silvera-700 text-white px-6 py-2 rounded-xl transition">Save Settings</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Add Product Modal -->
    <div id="productModal" class="fixed inset-0 bg-black/50 z-50 hidden flex items-center justify-center p-4">
        <div class="bg-white dark:bg-gray-800 rounded-2xl w-full max-w-lg max-h-[90vh] overflow-y-auto">
            <div class="p-6 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center">
                <h3 class="text-lg font-semibold">Add Product</h3>
                <button onclick="closeProductModal()" class="p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg"><i data-feather="x" class="w-5 h-5"></i></button>
            </div>
            <form onsubmit="saveProduct(event)" class="p-6 space-y-4">
                <div>
                    <label class="block text-sm font-medium mb-1">Product Name</label>
                    <input type="text" id="prodName" required class="w-full px-4 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl">
                </div>
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium mb-1">Price (â‚±)</label>
                        <input type="number" id="prodPrice" required class="w-full px-4 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl">
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-1">Sale Price (â‚±)</label>
                        <input type="number" id="prodSalePrice" class="w-full px-4 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl">
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium mb-1">Category</label>
                    <select id="prodCategory" class="w-full px-4 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl"></select>
                </div>
                <div>
                    <label class="block text-sm font-medium mb-1">Description</label>
                    <textarea id="prodDesc" rows="3" class="w-full px-4 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl"></textarea>
                </div>
                <div>
                    <label class="block text-sm font-medium mb-1">Stock</label>
                    <input type="number" id="prodStock" value="0" class="w-full px-4 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl">
                </div>
                <div class="flex items-center gap-2">
                    <input type="checkbox" id="prodFeatured" class="w-4 h-4 rounded">
                    <label>Featured Product</label>
                </div>
                <div class="flex gap-3 pt-4">
                    <button type="button" onclick="closeProductModal()" class="flex-1 px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-xl transition">Cancel</button>
                    <button type="submit" class="flex-1 px-4 py-2 bg-silvera-600 hover:bg-silvera-700 text-white rounded-xl transition">Save Product</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        feather.replace();
        
        const API = '/api';
        let token = localStorage.getItem('silvera_token');
        let salesChart, categoryChart, orderStatusChart;

        async function api(endpoint, options = {}) {
            const headers = { 'Content-Type': 'application/json' };
            if (token) headers['Authorization'] = `Bearer ${token}`;
            try {
                const res = await fetch(`${API}${endpoint}`, { ...options, headers });
                return res.json();
            } catch (e) {
                console.error('API Error:', e);
                return { error: e.message };
            }
        }

        async function login(e) {
            e.preventDefault();
            const data = await api('/auth/login', {
                method: 'POST',
                body: JSON.stringify({
                    email: document.getElementById('loginEmail').value,
                    password: document.getElementById('loginPassword').value
                })
            });
            if (data.token) {
                token = data.token;
                localStorage.setItem('silvera_token', token);
                showDashboard();
            } else {
                alert('Login failed: ' + (data.error || 'Invalid credentials'));
            }
        }

        function showDashboard() {
            document.getElementById('loginScreen').classList.add('hidden');
            document.getElementById('dashboardContent').classList.remove('hidden');
            document.getElementById('pageDate').textContent = new Date().toLocaleDateString('en-PH', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });
            loadDashboard();
        }

        function toggleDarkMode() {
            document.documentElement.classList.toggle('dark');
            localStorage.setItem('darkMode', document.documentElement.classList.contains('dark'));
        }

        function showTab(tab) {
            document.querySelectorAll('.tab-content').forEach(t => t.classList.add('hidden'));
            document.querySelectorAll('.sidebar-item').forEach(s => s.classList.remove('active'));
            document.getElementById(tab + 'Tab').classList.remove('hidden');
            document.querySelector(`[onclick="showTab('${tab}')"]`)?.classList.add('active');
            document.getElementById('pageTitle').textContent = tab.charAt(0).toUpperCase() + tab.slice(1);
            
            if (tab === 'dashboard') loadDashboard();
            else if (tab === 'analytics') loadAnalytics();
            else if (tab === 'orders') loadOrders();
            else if (tab === 'products') loadProducts();
            else if (tab === 'inventory') loadInventory();
            else if (tab === 'customers') loadCustomers();
            else if (tab === 'categories') loadCategories();
            
            feather.replace();
        }

        async function loadDashboard() {
            const stats = await api('/admin/dashboard');
            document.getElementById('statRevenue').textContent = (stats.totalRevenue || 0).toLocaleString();
            document.getElementById('statOrders').textContent = stats.totalOrders || 0;
            document.getElementById('statProducts').textContent = stats.totalProducts || 0;
            document.getElementById('statUsers').textContent = stats.totalUsers || 0;
            
            const products = await api('/products');
            document.getElementById('topProductsList').innerHTML = products.slice(0, 5).map(p => `
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 bg-silvera-100 rounded-lg flex items-center justify-center">ðŸ“¦</div>
                    <div class="flex-1">
                        <p class="font-medium text-sm text-gray-900 dark:text-white">${p.name}</p>
                        <p class="text-xs text-gray-500">â‚±${(p.sale_price || p.price).toLocaleString()}</p>
                    </div>
                </div>
            `).join('');
            
            const lowStock = products.filter(p => p.stock < 20);
            document.getElementById('lowStockList').innerHTML = lowStock.slice(0, 5).map(p => `
                <div class="flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-xl">
                    <span class="text-sm font-medium">${p.name}</span>
                    <span class="text-sm ${p.stock < 10 ? 'text-red-500' : 'text-amber-500'} font-semibold">${p.stock} left</span>
                </div>
            `).join('') || '<p class="text-gray-500 text-center py-4">All products well stocked!</p>';
            
            initSalesChart();
        }

        function initSalesChart() {
            if (salesChart) salesChart.destroy();
            const ctx = document.getElementById('salesChart').getContext('2d');
            salesChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                    datasets: [{
                        label: 'Sales (â‚±)',
                        data: [12500, 19200, 15000, 25400, 22100, 30500, 28000],
                        borderColor: '#7c3aed',
                        backgroundColor: 'rgba(124, 58, 237, 0.1)',
                        fill: true,
                        tension: 0.4
                    }]
                },
                options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } } }
            });
        }

        async function loadAnalytics() {
            if (categoryChart) categoryChart.destroy();
            const ctx1 = document.getElementById('categoryChart').getContext('2d');
            categoryChart = new Chart(ctx1, {
                type: 'doughnut',
                data: {
                    labels: ['Fashion', 'Electronics', 'Home', 'Beauty', 'Sports'],
                    datasets: [{ data: [35, 25, 15, 15, 10], backgroundColor: ['#7c3aed', '#3b82f6', '#10b981', '#f59e0b', '#ef4444'] }]
                },
                options: { responsive: true, maintainAspectRatio: false }
            });
            
            if (orderStatusChart) orderStatusChart.destroy();
            const ctx2 = document.getElementById('orderStatusChart').getContext('2d');
            orderStatusChart = new Chart(ctx2, {
                type: 'bar',
                data: {
                    labels: ['Pending', 'Processing', 'Shipped', 'Delivered'],
                    datasets: [{ data: [15, 8, 12, 45], backgroundColor: ['#fbbf24', '#3b82f6', '#8b5cf6', '#10b981'] }]
                },
                options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } } }
            });
        }

        async function loadProducts() {
            const products = await api('/admin/products');
            document.getElementById('productsTableBody').innerHTML = products.map(p => `
                <tr class="hover:bg-gray-50 dark:hover:bg-gray-700">
                    <td class="px-6 py-4"><div class="flex items-center gap-3"><div class="w-10 h-10 bg-silvera-100 rounded-lg flex items-center justify-center">ðŸ“¦</div><div><p class="font-medium">${p.name}</p><p class="text-xs text-gray-500">${p.description?.substring(0,30) || ''}...</p></div></div></td>
                    <td class="px-6 py-4 text-sm">${p.category_name || '-'}</td>
                    <td class="px-6 py-4">${p.sale_price ? `<span class="text-red-500 font-semibold">â‚±${p.sale_price}</span> <span class="text-xs text-gray-400 line-through">â‚±${p.price}</span>` : `<span class="font-semibold">â‚±${p.price}</span>`}</td>
                    <td class="px-6 py-4"><span class="${p.stock < 10 ? 'text-red-500' : p.stock < 20 ? 'text-amber-500' : 'text-green-500'} font-semibold">${p.stock}</span></td>
                    <td class="px-6 py-4"><span class="px-2 py-1 ${p.status === 'active' ? 'bg-green-100 text-green-700' : 'bg-gray-100 text-gray-700'} text-xs rounded-full">${p.status}</span></td>
                    <td class="px-6 py-4"><button onclick="deleteProduct(${p.id})" class="p-2 hover:bg-red-100 rounded-lg text-red-500"><i data-feather="trash-2" class="w-4 h-4"></i></button></td>
                </tr>
            `).join('');
            feather.replace();
        }

        async function loadOrders() {
            const orders = await api('/admin/orders');
            document.getElementById('ordersTableBody').innerHTML = orders.map(o => `
                <tr class="hover:bg-gray-50 dark:hover:bg-gray-700">
                    <td class="px-6 py-4 font-semibold">#${o.id}</td>
                    <td class="px-6 py-4">${o.customer_name || o.email || 'Guest'}</td>
                    <td class="px-6 py-4">${JSON.parse(o.items || '[]').length} items</td>
                    <td class="px-6 py-4 font-semibold">â‚±${(o.total || 0).toLocaleString()}</td>
                    <td class="px-6 py-4"><span class="px-2 py-1 ${getStatusColor(o.status)} text-xs rounded-full">${o.status}</span></td>
                    <td class="px-6 py-4 text-sm text-gray-500">${new Date(o.created_at).toLocaleDateString()}</td>
                    <td class="px-6 py-4"><button class="p-2 hover:bg-gray-100 rounded-lg"><i data-feather="eye" class="w-4 h-4"></i></button></td>
                </tr>
            `).join('') || '<tr><td colspan="7" class="px-6 py-8 text-center text-gray-500">No orders yet</td></tr>';
            feather.replace();
        }

        function getStatusColor(status) {
            const colors = {
                pending: 'bg-amber-100 text-amber-700',
                processing: 'bg-blue-100 text-blue-700',
                shipped: 'bg-purple-100 text-purple-700',
                delivered: 'bg-green-100 text-green-700',
                cancelled: 'bg-red-100 text-red-700'
            };
            return colors[status] || 'bg-gray-100 text-gray-700';
        }

        async function loadInventory() {
            const products = await api('/products');
            document.getElementById('invTotal').textContent = products.length;
            document.getElementById('invLow').textContent = products.filter(p => p.stock < 20 && p.stock > 0).length;
            document.getElementById('invOut').textContent = products.filter(p => p.stock === 0).length;
            document.getElementById('invValue').textContent = products.reduce((sum, p) => sum + (p.price * p.stock), 0).toLocaleString();
            
            document.getElementById('inventoryTableBody').innerHTML = products.map(p => `
                <tr class="hover:bg-gray-50 dark:hover:bg-gray-700">
                    <td class="px-6 py-4 font-mono text-sm">SKU-${String(p.id).padStart(4, '0')}</td>
                    <td class="px-6 py-4 font-medium">${p.name}</td>
                    <td class="px-6 py-4 font-semibold ${p.stock < 10 ? 'text-red-500' : ''}">${p.stock}</td>
                    <td class="px-6 py-4"><span class="px-2 py-1 ${p.stock === 0 ? 'bg-red-100 text-red-700' : p.stock < 20 ? 'bg-amber-100 text-amber-700' : 'bg-green-100 text-green-700'} text-xs rounded-full">${p.stock === 0 ? 'Out of Stock' : p.stock < 20 ? 'Low Stock' : 'In Stock'}</span></td>
                    <td class="px-6 py-4 flex gap-1">
                        <button class="p-2 hover:bg-green-100 rounded-lg text-green-600"><i data-feather="plus" class="w-4 h-4"></i></button>
                        <button class="p-2 hover:bg-red-100 rounded-lg text-red-600"><i data-feather="minus" class="w-4 h-4"></i></button>
                    </td>
                </tr>
            `).join('');
            feather.replace();
        }

        async function loadCustomers() {
            const users = await api('/admin/users');
            document.getElementById('customersTableBody').innerHTML = users.map(u => `
                <tr class="hover:bg-gray-50 dark:hover:bg-gray-700">
                    <td class="px-6 py-4"><div class="flex items-center gap-3"><div class="w-10 h-10 bg-silvera-100 rounded-full flex items-center justify-center font-semibold text-silvera-600">${(u.name || u.email)?.[0]?.toUpperCase() || '?'}</div><span class="font-medium">${u.name || 'Guest'}</span></div></td>
                    <td class="px-6 py-4 text-sm">${u.email}</td>
                    <td class="px-6 py-4">0</td>
                    <td class="px-6 py-4">â‚±0</td>
                    <td class="px-6 py-4 text-sm text-gray-500">${new Date(u.created_at).toLocaleDateString()}</td>
                </tr>
            `).join('');
        }

        async function loadCategories() {
            const categories = await api('/admin/categories');
            const products = await api('/products');
            document.getElementById('categoriesTableBody').innerHTML = categories.map(c => `
                <tr class="hover:bg-gray-50 dark:hover:bg-gray-700">
                    <td class="px-6 py-4 font-mono">${c.id}</td>
                    <td class="px-6 py-4 font-medium">${c.name}</td>
                    <td class="px-6 py-4 font-mono text-sm text-gray-500">${c.slug}</td>
                    <td class="px-6 py-4">${products.filter(p => p.category_id === c.id).length}</td>
                    <td class="px-6 py-4 flex gap-1">
                        <button class="p-2 hover:bg-gray-100 rounded-lg"><i data-feather="edit-2" class="w-4 h-4"></i></button>
                        <button class="p-2 hover:bg-red-100 rounded-lg text-red-500"><i data-feather="trash-2" class="w-4 h-4"></i></button>
                    </td>
                </tr>
            `).join('');
            feather.replace();
        }

        async function addCategory() {
            const name = prompt('Enter category name:');
            if (name) {
                await api('/admin/categories', { method: 'POST', body: JSON.stringify({ name }) });
                loadCategories();
            }
        }

        async function showAddProductModal() {
            const categories = await api('/categories');
            document.getElementById('prodCategory').innerHTML = categories.map(c => `<option value="${c.id}">${c.name}</option>`).join('');
            document.getElementById('productModal').classList.remove('hidden');
        }

        function closeProductModal() {
            document.getElementById('productModal').classList.add('hidden');
        }

        async function saveProduct(e) {
            e.preventDefault();
            const product = {
                name: document.getElementById('prodName').value,
                description: document.getElementById('prodDesc').value,
                price: parseFloat(document.getElementById('prodPrice').value),
                sale_price: parseFloat(document.getElementById('prodSalePrice').value) || null,
                category_id: parseInt(document.getElementById('prodCategory').value),
                stock: parseInt(document.getElementById('prodStock').value) || 0,
                featured: document.getElementById('prodFeatured').checked
            };
            await api('/admin/products', { method: 'POST', body: JSON.stringify(product) });
            closeProductModal();
            loadProducts();
        }

        async function deleteProduct(id) {
            if (confirm('Delete this product?')) {
                await api(`/admin/products/${id}`, { method: 'DELETE' });
                loadProducts();
            }
        }

        // Init
        if (localStorage.getItem('darkMode') === 'true') {
            document.documentElement.classList.add('dark');
        }
        
        if (token) {
            api('/auth/me').then(user => {
                if (user && !user.error) showDashboard();
            });
        }
    </script>
</body>
</html>
