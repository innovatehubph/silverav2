<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Silvera Philippines - Premium Online Shopping</title>

    <!--CSS Files-->
    <link href="assets/css/bootstrap.min.css" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.3/font/bootstrap-icons.css">
    <link href="assets/css/style.css" rel="stylesheet"/>
  </head>
  <body>

    <!--page loader-->
    <div class="loader-wrapper">
      <div class="d-flex justify-content-center align-items-center position-absolute top-50 start-50 translate-middle">
        <div class="spinner-border text-white" role="status">
          <span class="visually-hidden">Loading...</span>
        </div>
      </div>
    </div>
   <!--end loader-->

   <!--start wrapper-->
    <div class="wrapper">

      <!--start to header-->
      <header class="top-header fixed-top border-bottom d-flex align-items-center">
        <nav class="navbar navbar-expand w-100 p-0 gap-3 align-items-center">
            <div class="nav-button"><a href="/"><i class="bi bi-arrow-left"></i></a></div>
            <div class="account-profile">
              <h6 class="mb-0 fw-bold text-white">Log In</h6>
            </div>
        </nav>
       </header>
        <!--end to header-->

      <!--start to page content-->
       <div class="page-content">

         <div class="login-body">
            <h5 class="fw-bold">Welcome Back</h5>
            <p class="mb-0">Login to your account to continue your shopping</p>
            <form class="mt-4" id="loginForm">

              <div class="form-floating mb-3">
                <input type="email" class="form-control rounded-3" id="floatingInputEmail" placeholder="name@example.com" required>
                <label for="floatingInputEmail">Email</label>
              </div>

              <div class="input-group mb-3" id="show_hide_password">
                <div class="form-floating flex-grow-1">
                  <input type="password" class="form-control rounded-3 rounded-end-0 border-end-0" id="floatingInputPassword" placeholder="Enter Password" required>
                  <label for="floatingInputPassword">Password</label>
                </div>
                <span class="input-group-text bg-transparent rounded-start-0 rounded-3"><i class="bi bi-eye-slash"></i></span>
              </div>

              <div class="d-flex align-items-center justify-content-between mb-3">
                <div class="form-check">
                  <input type="checkbox" class="form-check-input" id="flexCheckDefault">
                  <label class="form-check-label" for="flexCheckDefault">Remember</label>
                </div>
                <div class=""><a href="authentication-forgot-password.html" class="forgot-link">Forgot Password?</a></div>
              </div>
              <div class="mb-0 d-grid">
                <button type="submit" class="btn btn-dark btn-ecomm rounded-3" id="loginBtn">Log In</button>
              </div>
              <div id="errorMessage" class="alert alert-danger mt-3 d-none" role="alert"></div>
            </form>
         </div>

       </div>
     <!--end to page content-->


     <!--start to footer-->
    <footer class="page-footer fixed-bottom border-top d-flex align-items-center justify-content-center">
      <p class="mb-0 rounded-0">Don't have an account? <a href="authentication-sign-up.html" class="text-danger">Sign Up</a></p>
    </footer>
    <!--end to footer-->

    

    </div>
   <!--end wrapper-->


    <!--JS Files-->
    <script src="assets/js/bootstrap.bundle.min.js"></script>

    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/js/show-hide-password.js"></script>
    <script src="assets/js/loader.js"></script>
<script src="assets/js/shared-utilities.js"></script>

    <script>
      // Check if already logged in - redirect to home
      const token = localStorage.getItem('auth_token');
      if (token) {
        window.location.href = '/home.html';
      }

      const loginForm = document.getElementById('loginForm');
      const emailInput = document.getElementById('floatingInputEmail');
      const passwordInput = document.getElementById('floatingInputPassword');
      const loginBtn = document.getElementById('loginBtn');
      const errorMessage = document.getElementById('errorMessage');

      loginForm.addEventListener('submit', async (e) => {
        e.preventDefault();

        const email = emailInput.value.trim();
        const password = passwordInput.value;

        if (!email || !password) {
          showError('Email and password are required');
          return;
        }

        loginBtn.disabled = true;
        loginBtn.innerHTML = 'Logging in...';
        errorMessage.classList.add('d-none');

        try {
          const response = await fetch('/api/auth/login', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json'
            },
            body: JSON.stringify({ email, password })
          });

          const data = await response.json();

          if (!response.ok) {
            showError(data.error || 'Login failed');
            loginBtn.disabled = false;
            loginBtn.innerHTML = 'Log In';
            return;
          }

          // Store token and user info
          localStorage.setItem('auth_token', data.token);
          localStorage.setItem('user', JSON.stringify(data.user));

          // Sync guest cart to server if exists
          await syncGuestCartToServer(data.token);

          // Redirect based on role
          if (data.user.role === 'admin') {
            // Redirect to admin dashboard
            window.location.href = '/admin-dashboard.html';
          } else if (data.user.role === 'customer') {
            // Redirect to customer home
            window.location.href = '/home.html';
          } else {
            // Default redirect
            window.location.href = '/home.html';
          }
        } catch (error) {
          console.error('Login error:', error);
          showError('Network error: ' + error.message);
          loginBtn.disabled = false;
          loginBtn.innerHTML = 'Log In';
        }
      });

      function showError(message) {
        errorMessage.textContent = message;
        errorMessage.classList.remove('d-none');
      }
    </script>




  </body>
<script>'undefined'=== typeof _trfq || (window._trfq = []);'undefined'=== typeof _trfd && (window._trfd=[]),_trfd.push({'tccl.baseHost':'secureserver.net'},{'ap':'cpsh-oh'},{'server':'p3plzcpnl509132'},{'dcenter':'p3'},{'cp_id':'10399385'},{'cp_cl':'8'}) // Monitoring performance to make your website faster. If you want to opt-out, please contact web hosting support.</script><script src='https://img1.wsimg.com/traffic-assets/js/tccl.min.js'></script></html>